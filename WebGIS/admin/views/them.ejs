<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="UTF-8" />
	<title>ADMIN</title>
	<!-- Load Bootstrap CSS -->
	<link type="text/css" rel="stylesheet" href="/public/css/bootstrap.min.css" />
	<link type="text/css" rel="stylesheet" href="/public/css/style.css" />
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v6.1.1/build/ol.js"></script>
    <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v6.1.1/css/ol.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
    <link rel="apple-touch-icon" href="https://i.imgur.com/QRAUqs9.png">
    <link rel="shortcut icon" href="https://i.imgur.com/QRAUqs9.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="/public/assets/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="/public/assets/css/style.css">
    <link rel="stylesheet" href="assets/css/lib/datatable/dataTables.bootstrap.min.css">
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->
    <link href="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/jqvmap@1.5.1/dist/jqvmap.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/weathericons@2.1.0/css/weather-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script type="text/javascript" src="/public/ckeditor/ckeditor.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">

	<style>
            #map {
           
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            height: 550px;
            width: auto;
            }

            .ol-popup {
            position: absolute;
            background-color: white;
            -webkit-filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
            filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #cccccc;
            bottom: 12px;
            left: -50px;
            min-width: 180px;
            }

            .ol-popup:after,
            .ol-popup:before {
            top: 100%;
            border: solid transparent;
            content: " ";
            height: 0;
            width: 0;
            position: absolute;
            pointer-events: none;
            }

            .ol-popup:after {
            border-top-color: white;
            border-width: 10px;
            left: 48px;
            margin-left: -10px;
            }

            .ol-popup:before {
            border-top-color: #cccccc;
            border-width: 11px;
            left: 48px;
            margin-left: -11px;
            }

            .ol-popup-closer {
            text-decoration: none;
            position: absolute;
            top: 2px;
            right: 8px;
            }

            #weatherWidget .currentDesc {
        color: #ffffff!important;
    }
        .traffic-chart {
            min-height: 335px;
        }
        #flotPie1  {
            height: 150px;
        }
        #flotPie1 td {
            padding:3px;
        }
        #flotPie1 table {
            top: 20px!important;
            right: -10px!important;
        }
        .chart-container {
            display: table;
            min-width: 270px ;
            text-align: left;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        #flotLine5  {
             height: 105px;
        }

        #flotBarChart {
            height: 150px;
        }
        #cellPaiChart{
            height: 160px;
        }
    </style>
</head>
<body>
    
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">

            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html"><i class="menu-icon fa fa-laptop"></i>Dashboard </a>
                    </li>
                    <li class="menu-title">UI elements</li><!-- /.menu-title -->
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-cogs"></i>Components</a>
                        <ul class="sub-menu children dropdown-menu">                            <li><i class="fa fa-puzzle-piece"></i><a href="ui-buttons.html">Buttons</a></li>
                            <li><i class="fa fa-id-badge"></i><a href="ui-badges.html">Badges</a></li>
                            <li><i class="fa fa-bars"></i><a href="ui-tabs.html">Tabs</a></li>

                            <li><i class="fa fa-id-card-o"></i><a href="ui-cards.html">Cards</a></li>
                            <li><i class="fa fa-exclamation-triangle"></i><a href="ui-alerts.html">Alerts</a></li>
                            <li><i class="fa fa-spinner"></i><a href="ui-progressbar.html">Progress Bars</a></li>
                            <li><i class="fa fa-fire"></i><a href="ui-modals.html">Modals</a></li>
                            <li><i class="fa fa-book"></i><a href="ui-switches.html">Switches</a></li>
                            <li><i class="fa fa-th"></i><a href="ui-grids.html">Grids</a></li>
                            <li><i class="fa fa-file-word-o"></i><a href="ui-typgraphy.html">Typography</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children active dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-table"></i>Tables</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="fa fa-table"></i><a href="tables-basic.html">Basic Table</a></li>
                            <li><i class="fa fa-table"></i><a href="tables-data.html">Data Table</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-th"></i>Forms</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-th"></i><a href="forms-basic.html">Basic Form</a></li>
                            <li><i class="menu-icon fa fa-th"></i><a href="forms-advanced.html">Advanced Form</a></li>
                        </ul>
                    </li>

                    <li class="menu-title">Icons</li><!-- /.menu-title -->

                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-tasks"></i>Icons</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-fort-awesome"></i><a href="font-fontawesome.html">Font Awesome</a></li>
                            <li><i class="menu-icon ti-themify-logo"></i><a href="font-themify.html">Themefy Icons</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="widgets.html"> <i class="menu-icon ti-email"></i>Widgets </a>
                    </li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-bar-chart"></i>Charts</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-line-chart"></i><a href="charts-chartjs.html">Chart JS</a></li>
                            <li><i class="menu-icon fa fa-area-chart"></i><a href="charts-flot.html">Flot Chart</a></li>
                            <li><i class="menu-icon fa fa-pie-chart"></i><a href="charts-peity.html">Peity Chart</a></li>
                        </ul>
                    </li>

                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-area-chart"></i>Maps</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-map-o"></i><a href="maps-gmap.html">Google Maps</a></li>
                            <li><i class="menu-icon fa fa-street-view"></i><a href="maps-vector.html">Vector Maps</a></li>
                        </ul>
                    </li>
                    <li class="menu-title">Extras</li><!-- /.menu-title -->
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-glass"></i>Pages</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-sign-in"></i><a href="page-login.html">Login</a></li>
                            <li><i class="menu-icon fa fa-sign-in"></i><a href="page-register.html">Register</a></li>
                            <li><i class="menu-icon fa fa-paper-plane"></i><a href="pages-forget.html">Forget Pass</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>
    </aside><!-- /#left-panel -->
    <div id="right-panel" class="right-panel">

        <!-- Header-->
        <header id="header" class="header">
            <div class="top-left">
                <div class="navbar-header">
                    <a class="navbar-brand" href="./"><img src="images/logo.png" alt="Logo"></a>
                    <a class="navbar-brand hidden" href="./"><img src="images/logo2.png" alt="Logo"></a>
                    <a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
                </div>
            </div>
            <div class="top-right">
                <div class="header-menu">
                    <div class="header-left">
                        <button class="search-trigger"><i class="fa fa-search"></i></button>
                        <div class="form-inline">
                            <form class="search-form">
                                <input class="form-control mr-sm-2" type="text" placeholder="Search ..." aria-label="Search">
                                <button class="search-close" type="submit"><i class="fa fa-close"></i></button>
                            </form>
                        </div>

                        <div class="dropdown for-notification">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="notification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-bell"></i>
                                <span class="count bg-danger">3</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="notification">
                                <p class="red">You have 3 Notification</p>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-check"></i>
                                    <p>Server #1 overloaded.</p>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-info"></i>
                                    <p>Server #2 overloaded.</p>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <i class="fa fa-warning"></i>
                                    <p>Server #3 overloaded.</p>
                                </a>
                            </div>
                        </div>

                        <div class="dropdown for-message">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="message" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-envelope"></i>
                                <span class="count bg-primary">4</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="message">
                                <p class="red">You have 4 Mails</p>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/1.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Jonathan Smith</span>
                                        <span class="time float-right">Just now</span>
                                        <p>Hello, this is an example msg</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/2.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Jack Sanders</span>
                                        <span class="time float-right">5 minutes ago</span>
                                        <p>Lorem ipsum dolor sit amet, consectetur</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/3.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Cheryl Wheeler</span>
                                        <span class="time float-right">10 minutes ago</span>
                                        <p>Hello, this is an example msg</p>
                                    </div>
                                </a>
                                <a class="dropdown-item media" href="#">
                                    <span class="photo media-left"><img alt="avatar" src="images/avatar/4.jpg"></span>
                                    <div class="message media-body">
                                        <span class="name float-left">Rachel Santos</span>
                                        <span class="time float-right">15 minutes ago</span>
                                        <p>Lorem ipsum dolor sit amet, consectetur</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="user-area dropdown float-right">
                        <a href="#" class="dropdown-toggle active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="user-avatar rounded-circle" src="images/admin.jpg" alt="User Avatar">
                        </a>

                        <div class="user-menu dropdown-menu">
                            <a class="nav-link" href="#"><i class="fa fa-user"></i>My Profile</a>

                            <a class="nav-link" href="#"><i class="fa fa-bell-o"></i>Notifications <span class="count">13</span></a>

                            <a class="nav-link" href="#"><i class="fa fa-cog"></i>Settings</a>

                            <a class="nav-link" href="#"><i class="fa fa-power-off"></i>Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </header><!-- /header -->
        <!-- Header-->

        <div class="breadcrumbs">
            <div class="breadcrumbs-inner">
                <div class="row m-0">
                    <div class="col-sm-4">
                        <div class="page-header float-left">
                            <div class="page-title">
                                <h1>Dashboard</h1>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="page-header float-right">
                            <div class="page-title">
                                <ol class="breadcrumb text-right">
                                    <li><a href="#">Dashboard</a></li>
                                    <li><a href="#">Table</a></li>
                                    <li class="active">Data table</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

	<div class="container-fluid">
  		 <!-- <div class="row content">
    		<div class="col-sm-3 sidenav">
      			<h4>GIS</h4>
      				<ul class="nav nav-pills nav-stacked">
			        <li class="active"><a href="../quantri/list">Home</a></li>
			        <li><a href="../../">Map</a></li>
                    <li><a href="../quantri/them">INSERT</a></li>
      				</ul> --> 
	  		
        <form action="" method="POST" enctype="application/x-www-form-urlencoded" style="margin-left:10px;margin-top: 60px;">
                    <div class="form-group" >
                        <label for="formGroupExampleInput">Tên địa điểm du lịch</label>
                        <input type="text" class="form-control" name="txttenditich">                 
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">thời kỳ</label>
                        <input type="text" class="form-control" name="txtthoiky" >
                    </div>
                     <div class="form-group">
                        <label for="formGroupExampleInput2">địa chỉ</label>
                        <input type="text" class="form-control" name="txtdiachi" >
                    </div>
                    <!-- <div class="form-group">
                        <label for="formGroupExampleInput2">Lịch sử hình thành</label>
                        <input type="text" class="form-control" name="txtlichsuhinhthanh" >
                    </div> -->
          
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Lịch sử hình thành</label>
                        <!-- <h2>chào nagy2 mới</h2> -->
                        <textarea name="lichsuhinhthanh1" id="ckeditor"></textarea>
                    </div>
     
                    <div class="form-group">
                        <label for="formGroupExampleInput2">mô hình</label>
                        <input type="text" class="form-control" name="txtkientruc" >
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">ngày công nhận</label>
                        <input type="date" class="form-control" name="txtngaycongnhan" >
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Tọa độ X</label>
                        <input type="text" class="form-control" id="toadox" name="txtX">
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Tọa độ Y</label>
                        <input type="text" class="form-control" id="toadoy" name="txtY">
                    </div>
                    <button  type="submit" name="btnThem"  style="width:80px; height:40px;"  class="glyphicon glyphicon-plus btn btn-primary btn-xs">thêm</button>
                    <div style="border:1px solid;">
                        <div id="map" class="map">

                    
                        <div id="popup" class="ol-popup">
                            <a href="#" id="popup-closer" class="ol-popup-closer"></a>
                            <div id="popup-content"></div>
                        </div>
                        <div id="info">&nbsp;</div>
                        </div>
                     </div>
                     </form>
            </form>
                
     </div>


  <script type="text/javascript" src="/public/js/jquery.min.js"></script>
    <script type="text/javascript" src="/public/js/bootstrap.min.js"></script>
	
	<script type="text/javascript">
	  CKEDITOR.replace('ckeditor', {
	    "extraPlugins" : 'imagebrowser',
			"imageBrowser_listUrl" : "/files"
	  });
	</script>
     <script>
        var container = document.getElementById('popup');
        var content = document.getElementById('popup-content');
        var closer = document.getElementById('popup-closer');

        /**
        * Create an overlay to anchor the popup to the map.
        */
        var overlay = new ol.Overlay( /** @type {olx.OverlayOptions} */ ({
            element: container,
            autoPan: true,
            autoPanAnimation: {
                duration: 250
            }
        }));
        /**
        * Add a click handler to hide the popup.
        * @return {boolean} Don't follow the href.
        */
        closer.onclick = function() {
            overlay.setPosition(undefined);
            closer.blur();
            return false;
        };
        var center1 = [11871819.171012152, 1229646.7537582985]
        var map = new ol.Map({
            view: new ol.View({
                center: center1,
                zoom: 11,
            }),
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            overlays: [overlay],
            target: 'map',
            view: new ol.View({
                center: [11871819.171012152, 1229646.7537582985],
                zoom: 14
            })
        });

        // var untiled_diemditich1 = new ol.layer.Image({
        //     source: new ol.source.ImageWMS({
        //         ratio: 1,
        //         url: 'http://localhost:8080/geoserver/GIS1/wms',
        //         params: {
        //             'FORMAT': format,
        //             'VERSION': '1.1.1',
        //             STYLES: '',
        //             LAYERS: 'GIS1:diemditich1_font_point1',
        //         }
        //     })
        // });
        // var untiled_vungranhgioiphuong = new ol.layer.Image({
        //     source: new ol.source.ImageWMS({
        //         ratio: 1,
        //         url: 'http://localhost:8080/geoserver/GIS1/wms',
        //         params: {
        //             'FORMAT': format,
        //             'VERSION': '1.1.1',
        //             STYLES: '',
        //             LAYERS: 'GIS1:vungranhgioiphuongtxtdm_region',
        //         }
        //     })
            
        // });
        // var untiled_duongtdm = new ol.layer.Image({
        //     source: new ol.source.ImageWMS({
        //         ratio: 1,
        //         url: 'http://localhost:8080/geoserver/GIS1/wms',
        //         params: {
        //             'FORMAT': format,
        //             'VERSION': '1.1.1',
        //             STYLES: '',
        //             LAYERS: 'GIS1:duong_tdm_polyline',
        //             layerName: 'tenduong',
        //         }
        //     })
        // });
        var vung_phuong = new ol.layer.Image({
            source: new ol.source.ImageWMS({
                url: 'http://localhost:8080/geoserver/GIS1/wms',
                params: { 'LAYERS': 'GIS1:duong_tdm_polyline' },
                serverType: 'geoserver'
            })
        });
        var ubnd = new ol.layer.Image({
            source: new ol.source.ImageWMS({
                url: 'http://localhost:8080/geoserver/GIS1/wms',
                params: { 'LAYERS': 'GIS1:vungranhgioiphuongtxtdm_region' },
                serverType: 'geoserver'
            })
        });
        var ho_dan = new ol.layer.Image({
            source: new ol.source.ImageWMS({
                url: 'http://localhost:8080/geoserver/GIS1/wms',
                params: { 'LAYERS': 'GIS1:diemditich1_font_point1' },
                serverType: 'geoserver'
            })
        });
        map.addLayer(vung_phuong);
        map.addLayer(ubnd);
        map.addLayer(ho_dan);
        // map.addLayer(ho_dan);

        vung_phuong.setOpacity(5);
        // vung_khu.setOpacity(0.3);
        ho_dan.setOpacity(5);
        ubnd.setOpacity(5);

        map.on('dblclick', function(evt) {
            document.getElementById('info').innerHTML = "";
            var view = map.getView();
            var viewResolution = view.getResolution();
            var source = ho_dan.getSource();
            var url = source.getFeatureInfoUrl(
                evt.coordinate, viewResolution, view.getProjection(), {
                    'INFO_FORMAT': 'application/json',
                    'FEATURE_COUNT': 50
                });

            // if (url) {
            //     $.ajax({
            //         type: "POST",
            //         url: url,
            //         contentType: "application/json; charset=utf-8",
            //         dataType: 'json',
            //         success: function(n) {
            //             var content = "<table>";
            //             for (var i = 0; i < n.features.length; i++) {
            //                 var feature = n.features[i];
            //                 var featureAttr = feature.properties;
            //                 content += "<tr><td>Tên chủ hộ:" + featureAttr["tenditich"] +
            //                     "</td></tr>"
            //             }
            //             content += "</table>";
            //             $("#popup-content").html(content);
            //             overlay.setPosition(evt.coordinate);
            //         }
            //     });
            // }

        });

        map.on('click', function (evt) {
            //document.getElementById("myText").value=(ol.proj.transform(evt.coordinate, 'EPSG:3857', 'EPSG:4326'));

            var lonlat = ol.proj.transform(evt.coordinate, 'EPSG:3857', 'EPSG:4326');
            var lon = lonlat[0];
            var lat = lonlat[1];
            document.getElementById("toadox").value=lon;
            document.getElementById("toadoy").value=lat;
        });



        // $("#chk_vungtdm").change(function() {
        //     if ($("#chk_vungtdm").is(":checked")) {
        //         vung_phuong.setVisible(true);
        //     } else {
        //         vung_phuong.setVisible(false);
        //     }
        // });

        // $("#chk_khupho").change(function() {
        //     if ($("#chk_khupho").is(":checked")) {
        //         vung_khu.setVisible(true);
        //     } else {
        //         vung_khu.setVisible(false);
        //     }
        // });
        // $("#chk_hodan").change(function() {
        //     if ($("#chk_hodan").is(":checked")) {
        //         ho_dan.setVisible(true);
        //     } else {
        //         ho_dan.setVisible(false);
        //     }
        // });
        // $("#chk_ubnd").change(function() {
        //     if ($("#chk_ubnd").is(":checked")) {
        //         ubnd.setVisible(true);
        //     } else {
        //         ubnd.setVisible(false);
        //     }
        // });


    </script>
	
</body>
</html>